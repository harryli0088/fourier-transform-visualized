<script lang="ts">
  import Icon from 'fa-svelte'
  import { faGithub } from '@fortawesome/free-brands-svg-icons'

  import { BLUE, PURPLE, RED } from "../utils/constants";

  const height = 200
  const width = 476.38
  const halfWidth = width / 2

  // const str = "0.00,10.00 1.75,10.55 3.49,12.20 5.23,14.92 6.98,18.66 8.73,23.37 10.47,28.97 12.22,35.38 13.96,42.50 15.71,50.20 17.45,58.39 19.20,66.92 20.94,75.67 22.69,84.50 24.43,93.29 26.18,101.90 27.92,110.20 29.67,118.08 31.41,125.42 33.16,132.13 34.90,138.11 36.65,143.29 38.39,147.60 40.13,151.00 41.88,153.46 43.63,154.96 45.37,155.51 47.11,155.12 48.86,153.82 50.60,151.67 52.35,148.72 54.09,145.04 55.84,140.71 57.58,135.83 59.33,130.50 61.07,124.82 62.82,118.90 64.56,112.83 66.31,106.74 68.05,100.72 69.80,94.88 71.54,89.30 73.29,84.08 75.03,79.28 76.78,74.96 78.52,71.19 80.27,68.00 82.01,65.42 83.76,63.47 85.50,62.13 87.25,61.40 89.00,61.26 90.74,61.67 92.49,62.58 94.23,63.94 95.98,65.68 97.72,67.73 99.47,70.02 101.21,72.47 102.96,75.00 104.70,77.53 106.45,79.99 108.19,82.30 109.94,84.41 111.68,86.24 113.43,87.75 115.17,88.89 116.92,89.65 118.66,89.99 120.41,89.91 122.15,89.41 123.90,88.50 125.64,87.22 127.39,85.60 129.13,83.68 130.88,81.52 132.62,79.19 134.37,76.75 136.11,74.28 137.86,71.86 139.60,69.55 141.35,67.45 143.09,65.62 144.84,64.15 146.58,63.08 148.33,62.49 150.07,62.43 151.82,62.92 153.56,64.01 155.31,65.71 157.05,68.03 158.80,70.95 160.54,74.45 162.28,78.51 164.03,83.06 165.77,88.06 167.52,93.44 169.26,99.10 171.01,104.97 172.75,110.95 174.50,116.93 176.24,122.81 177.99,128.49 179.73,133.86 181.48,138.81 183.22,143.24 184.97,147.06 186.71,150.19 188.46,152.55 190.20,154.08 191.95,154.72 193.69,154.44 195.44,153.22 197.18,151.04 198.93,147.93 200.67,143.90 202.42,139.00 204.16,133.27 205.91,126.81 207.65,119.68 209.40,111.98 211.14,103.83 212.89,95.34 214.63,86.64 216.38,77.85 218.12,69.10 219.87,60.53 221.61,52.27 223.36,44.45 225.10,37.19 226.85,30.60 228.59,24.78 230.34,19.83 232.08,15.83 233.83,12.83 235.57,10.90 237.32,10.05 239.06,10.31 240.81,11.66 242.55,14.10 244.30,17.57 246.04,22.04 247.79,27.42 249.53,33.64 251.28,40.59 253.02,48.17 254.77,56.26 256.51,64.74 258.26,73.48 260.00,82.35 261.75,91.20 263.49,99.92 265.24,108.36 266.98,116.41 268.73,123.96 270.47,130.90 272.22,137.13 273.96,142.57 275.71,147.17 277.45,150.85 279.20,153.60 280.94,155.39 282.69,156.21 284.43,156.08 286.18,155.02 287.92,153.08 289.67,150.31 291.41,146.79 293.16,142.59 294.90,137.79 296.65,132.51 298.39,126.84 300.14,120.88 301.88,114.76 303.63,108.56 305.37,102.41 307.12,96.40 308.86,90.63 310.61,85.18 312.35,80.14 314.10,75.57 315.84,71.54 317.59,68.08 319.33,65.23 321.08,63.01 322.82,61.43 324.57,60.46 326.31,60.11 328.06,60.32 329.80,61.07 331.55,62.29 333.29,63.93 335.04,65.92 336.78,68.18 338.53,70.64 340.27,73.21 342.02,75.83 343.76,78.40 345.51,80.86 347.25,83.14 349.00,85.17 350.74,86.90 352.49,88.29 354.23,89.29 355.98,89.89 357.72,90.06 359.47,89.82 361.21,89.16 362.96,88.12 364.70,86.71 366.45,84.99 368.19,83.00 369.94,80.81 371.68,78.48 373.43,76.08 375.17,73.69 376.92,71.38 378.66,69.24 380.41,67.34 382.15,65.76 383.90,64.55 385.64,63.79 387.39,63.53 389.13,63.80 390.88,64.65 392.62,66.10 394.37,68.15 396.11,70.80 397.86,74.04 399.60,77.83 401.35,82.14 403.09,86.91 404.84,92.07 406.58,97.55 408.33,103.26 410.07,109.11 411.82,115.00 413.56,120.82 415.31,126.48 417.05,131.87 418.80,136.88 420.54,141.41 422.29,145.36 424.03,148.66 425.78,151.21 427.52,152.96 429.27,153.84 431.01,153.83 432.76,152.88 434.50,150.99 436.25,148.16 437.99,144.41 439.74,139.79 441.48,134.33 443.23,128.10 444.97,121.20 446.72,113.70 448.46,105.71 450.21,97.36 451.95,88.75 453.70,80.01 455.44,71.28 457.19,62.69 458.93,54.37 460.68,46.45 462.42,39.05 464.17,32.28 465.91,26.27 467.66,21.09 469.40,16.83 471.15,13.57 472.89,11.34 474.64,10.20 476.38,10.16"
  // const split = str.split(" ").map(s => s.split(","))
  // console.log("split",split.findIndex(s => s[0]==="237.32"), split.length)
  // for(let i=0; i<137; ++i) {
  //   split[i + 137][1] = split[i][1]
  // }
  // console.log(split.map(s => s.join(",")).join(" "))
</script>

<main>
  <div id="github-container">
    <h1>Fourier Transform Visualized</h1>
    <p><i>Inspired by <a href="https://www.youtube.com/watch?v=spUNpyF58BY" target="_blank" rel="noopener noreferrer">3Blue1Brown</a></i></p>
    <div id="github" class="icon-button">
      <a href="https://github.com/harryli0088/fourier-transform-visualized" target="_blank" rel="noopener noreferrer" style="color: inherit"><Icon icon={faGithub}/></a>
    </div>
  </div>

  <div style="text-align: center;">
    <svg viewBox={`0 0 ${width} ${200}`}>
      <clipPath id="left-clip">
        <rect x="0" y="0" width={halfWidth} {height}/>
      </clipPath>
      <clipPath id="right-clip">
        <rect x={halfWidth} y="0" width={halfWidth} {height}/>
      </clipPath>
  
      <line x1={halfWidth} y1={0} x2={halfWidth} y2={height}/>
      <g clip-path="url(#left-clip)">
        <g class="animate combined">
          <path d="M 0.00,10.00 1.75,10.55 3.49,12.20 5.23,14.92 6.98,18.66 8.73,23.37 10.47,28.97 12.22,35.38 13.96,42.50 15.71,50.20 17.45,58.39 19.20,66.92 20.94,75.67 22.69,84.50 24.43,93.29 26.18,101.90 27.92,110.20 29.67,118.08 31.41,125.42 33.16,132.13 34.90,138.11 36.65,143.29 38.39,147.60 40.13,151.00 41.88,153.46 43.63,154.96 45.37,155.51 47.11,155.12 48.86,153.82 50.60,151.67 52.35,148.72 54.09,145.04 55.84,140.71 57.58,135.83 59.33,130.50 61.07,124.82 62.82,118.90 64.56,112.83 66.31,106.74 68.05,100.72 69.80,94.88 71.54,89.30 73.29,84.08 75.03,79.28 76.78,74.96 78.52,71.19 80.27,68.00 82.01,65.42 83.76,63.47 85.50,62.13 87.25,61.40 89.00,61.26 90.74,61.67 92.49,62.58 94.23,63.94 95.98,65.68 97.72,67.73 99.47,70.02 101.21,72.47 102.96,75.00 104.70,77.53 106.45,79.99 108.19,82.30 109.94,84.41 111.68,86.24 113.43,87.75 115.17,88.89 116.92,89.65 118.66,89.99 120.41,89.91 122.15,89.41 123.90,88.50 125.64,87.22 127.39,85.60 129.13,83.68 130.88,81.52 132.62,79.19 134.37,76.75 136.11,74.28 137.86,71.86 139.60,69.55 141.35,67.45 143.09,65.62 144.84,64.15 146.58,63.08 148.33,62.49 150.07,62.43 151.82,62.92 153.56,64.01 155.31,65.71 157.05,68.03 158.80,70.95 160.54,74.45 162.28,78.51 164.03,83.06 165.77,88.06 167.52,93.44 169.26,99.10 171.01,104.97 172.75,110.95 174.50,116.93 176.24,122.81 177.99,128.49 179.73,133.86 181.48,138.81 183.22,143.24 184.97,147.06 186.71,150.19 188.46,152.55 190.20,154.08 191.95,154.72 193.69,154.44 195.44,153.22 197.18,151.04 198.93,147.93 200.67,143.90 202.42,139.00 204.16,133.27 205.91,126.81 207.65,119.68 209.40,111.98 211.14,103.83 212.89,95.34 214.63,86.64 216.38,77.85 218.12,69.10 219.87,60.53 221.61,52.27 223.36,44.45 225.10,37.19 226.85,30.60 228.59,24.78 230.34,19.83 232.08,15.83 233.83,12.83 235.57,10.90 237.32,10.05 239.06,10.00 240.81,10.55 242.55,12.20 244.30,14.92 246.04,18.66 247.79,23.37 249.53,28.97 251.28,35.38 253.02,42.50 254.77,50.20 256.51,58.39 258.26,66.92 260.00,75.67 261.75,84.50 263.49,93.29 265.24,101.90 266.98,110.20 268.73,118.08 270.47,125.42 272.22,132.13 273.96,138.11 275.71,143.29 277.45,147.60 279.20,151.00 280.94,153.46 282.69,154.96 284.43,155.51 286.18,155.12 287.92,153.82 289.67,151.67 291.41,148.72 293.16,145.04 294.90,140.71 296.65,135.83 298.39,130.50 300.14,124.82 301.88,118.90 303.63,112.83 305.37,106.74 307.12,100.72 308.86,94.88 310.61,89.30 312.35,84.08 314.10,79.28 315.84,74.96 317.59,71.19 319.33,68.00 321.08,65.42 322.82,63.47 324.57,62.13 326.31,61.40 328.06,61.26 329.80,61.67 331.55,62.58 333.29,63.94 335.04,65.68 336.78,67.73 338.53,70.02 340.27,72.47 342.02,75.00 343.76,77.53 345.51,79.99 347.25,82.30 349.00,84.41 350.74,86.24 352.49,87.75 354.23,88.89 355.98,89.65 357.72,89.99 359.47,89.91 361.21,89.41 362.96,88.50 364.70,87.22 366.45,85.60 368.19,83.68 369.94,81.52 371.68,79.19 373.43,76.75 375.17,74.28 376.92,71.86 378.66,69.55 380.41,67.45 382.15,65.62 383.90,64.15 385.64,63.08 387.39,62.49 389.13,62.43 390.88,62.92 392.62,64.01 394.37,65.71 396.11,68.03 397.86,70.95 399.60,74.45 401.35,78.51 403.09,83.06 404.84,88.06 406.58,93.44 408.33,99.10 410.07,104.97 411.82,110.95 413.56,116.93 415.31,122.81 417.05,128.49 418.80,133.86 420.54,138.81 422.29,143.24 424.03,147.06 425.78,150.19 427.52,152.55 429.27,154.08 431.01,154.72 432.76,154.44 434.50,153.22 436.25,151.04 437.99,147.93 439.74,143.90 441.48,139.00 443.23,133.27 444.97,126.81 446.72,119.68 448.46,111.98 450.21,103.83 451.95,95.34 453.70,86.64 455.44,77.85 457.19,69.10 458.93,60.53 460.68,52.27 462.42,44.45 464.17,37.19 465.91,30.60 467.66,24.78 469.40,19.83 471.15,15.83 472.89,12.83 474.64,10.90 476.38,10.05" fill="none" stroke={PURPLE}/>
        </g>
      </g>
      <g clip-path="url(#right-clip)">
        <g class="animate broken-up">
          <g class="scale">
            <path d="M 0.00,10.00 1.75,10.76 3.49,13.04 5.23,16.78 6.98,21.92 8.73,28.36 10.47,35.97 12.22,44.62 13.96,54.13 15.71,64.32 17.45,75.01 19.20,85.98 20.94,97.03 22.69,107.94 24.43,118.51 26.18,128.54 27.92,137.83 29.67,146.21 31.41,153.52 33.16,159.61 34.90,164.38 36.65,167.73 38.39,169.60 40.13,169.94 41.88,168.77 43.63,166.08 45.37,161.95 47.11,156.45 48.86,149.68 50.60,141.76 52.35,132.87 54.09,123.15 55.84,112.80 57.58,102.02 59.33,91.01 61.07,79.97 62.82,69.13 64.56,58.69 66.31,48.84 68.05,39.78 69.80,31.68 71.54,24.69 73.29,18.95 75.03,14.56 76.78,11.61 78.52,10.16 80.27,10.23 82.01,11.82 83.76,14.90 85.50,19.42 87.25,25.28 89.00,32.38 90.74,40.57 92.49,49.71 94.23,59.62 95.98,70.10 97.72,80.97 99.47,92.01 101.21,103.01 102.96,113.76 104.70,124.06 106.45,133.71 108.19,142.53 109.94,150.34 111.68,157.00 113.43,162.39 115.17,166.39 116.92,168.93 118.66,169.97 120.41,169.49 122.15,167.49 123.90,164.01 125.64,159.11 127.39,152.90 129.13,145.49 130.88,137.02 132.62,127.66 134.37,117.57 136.11,106.96 137.86,96.03 139.60,84.98 141.35,74.02 143.09,63.37 144.84,53.23 146.58,43.79 148.33,35.24 150.07,27.72 151.82,21.40 153.56,16.38 155.31,12.77 157.05,10.63 158.80,10.01 160.54,10.91 162.28,13.32 164.03,17.19 165.77,22.45 167.52,29.00 169.26,36.72 171.01,45.45 172.75,55.03 174.50,65.28 176.24,76.00 177.99,86.98 179.73,98.03 181.48,108.92 183.22,119.45 184.97,129.42 186.71,138.63 188.46,146.92 190.20,154.13 191.95,160.10 193.69,164.75 195.44,167.96 197.18,169.69 198.93,169.90 200.67,168.58 202.42,165.77 204.16,161.51 205.91,155.88 207.65,149.00 209.40,140.99 211.14,132.01 212.89,122.23 214.63,111.84 216.38,101.02 218.12,90.00 219.87,78.98 221.61,68.16 223.36,57.77 225.10,47.99 226.85,39.01 228.59,31.00 230.34,24.12 232.08,18.49 233.83,14.23 235.57,11.42 237.32,10.10 239.06,10.31 240.81,12.04 242.55,15.25 244.30,19.90 246.04,25.87 247.79,33.08 249.53,41.37 251.28,50.58 253.02,60.55 254.77,71.08 256.51,81.97 258.26,93.02 260.00,104.00 261.75,114.72 263.49,124.97 265.24,134.55 266.98,143.28 268.73,151.00 270.47,157.55 272.22,162.81 273.96,166.68 275.71,169.09 277.45,169.99 279.20,169.37 280.94,167.23 282.69,163.62 284.43,158.60 286.18,152.28 287.92,144.76 289.67,136.21 291.41,126.77 293.16,116.63 294.90,105.98 296.65,95.02 298.39,83.97 300.14,73.04 301.88,62.43 303.63,52.34 305.37,42.98 307.12,34.51 308.86,27.10 310.61,20.89 312.35,15.99 314.10,12.51 315.84,10.51 317.59,10.03 319.33,11.07 321.08,13.61 322.82,17.61 324.57,23.00 326.31,29.66 328.06,37.47 329.80,46.29 331.55,55.94 333.29,66.24 335.04,76.99 336.78,87.99 338.53,99.03 340.27,109.90 342.02,120.38 343.76,130.29 345.51,139.43 347.25,147.62 349.00,154.72 350.74,160.58 352.49,165.10 354.23,168.18 355.98,169.77 357.72,169.84 359.47,168.39 361.21,165.44 362.96,161.05 364.70,155.31 366.45,148.32 368.19,140.22 369.94,131.16 371.68,121.31 373.43,110.87 375.17,100.03 376.92,88.99 378.66,77.98 380.41,67.20 382.15,56.85 383.90,47.13 385.64,38.24 387.39,30.32 389.13,23.55 390.88,18.05 392.62,13.92 394.37,11.23 396.11,10.06 397.86,10.40 399.60,12.27 401.35,15.62 403.09,20.39 404.84,26.48 406.58,33.79 408.33,42.17 410.07,51.46 411.82,61.49 413.56,72.06 415.31,82.97 417.05,94.02 418.80,104.99 420.54,115.68 422.29,125.87 424.03,135.38 425.78,144.03 427.52,151.64 429.27,158.08 431.01,163.22 432.76,166.96 434.50,169.24 436.25,170.00 437.99,169.24 439.74,166.96 441.48,163.22 443.23,158.08 444.97,151.64 446.72,144.03 448.46,135.38 450.21,125.87 451.95,115.68 453.70,104.99 455.44,94.02 457.19,82.97 458.93,72.06 460.68,61.49 462.42,51.46 464.17,42.17 465.91,33.79 467.66,26.48 469.40,20.39 471.15,15.62 472.89,12.27 474.64,10.40 476.38,10.06" fill="none" stroke={RED}></path>
            <path d="M 0.00,10.00 1.75,10.34 3.49,11.36 5.23,13.05 6.98,15.40 8.73,18.38 10.47,21.97 12.22,26.15 13.96,30.86 15.71,36.08 17.45,41.77 19.20,47.86 20.94,54.31 22.69,61.06 24.43,68.07 26.18,75.26 27.92,82.57 29.67,89.95 31.41,97.33 33.16,104.64 34.90,111.84 36.65,118.84 38.39,125.60 40.13,132.06 41.88,138.15 43.63,143.84 45.37,149.07 47.11,153.79 48.86,157.97 50.60,161.57 52.35,164.57 54.09,166.92 55.84,168.62 57.58,169.65 59.33,170.00 61.07,169.67 62.82,168.66 64.56,166.98 66.31,164.64 68.05,161.66 69.80,158.08 71.54,153.91 73.29,149.20 75.03,143.99 76.78,138.31 78.52,132.23 80.27,125.78 82.01,119.03 83.76,112.03 85.50,104.84 87.25,97.53 89.00,90.15 90.74,82.77 92.49,75.45 94.23,68.26 95.98,61.25 97.72,54.49 99.47,48.03 101.21,41.93 102.96,36.23 104.70,31.00 106.45,26.27 108.19,22.08 109.94,18.47 111.68,15.47 113.43,13.11 115.17,11.40 116.92,10.36 118.66,10.00 120.41,10.32 122.15,11.32 123.90,13.00 125.64,15.33 127.39,18.29 129.13,21.87 130.88,26.03 132.62,30.73 134.37,35.94 136.11,41.61 137.86,47.69 139.60,54.13 141.35,60.88 143.09,67.87 144.84,75.06 146.58,82.37 148.33,89.75 150.07,97.13 151.82,104.45 153.56,111.64 155.31,118.65 157.05,125.42 158.80,131.89 160.54,137.99 162.28,143.69 164.03,148.93 165.77,153.67 167.52,157.87 169.26,161.48 171.01,164.49 172.75,166.87 174.50,168.58 176.24,169.63 177.99,170.00 179.73,169.69 181.48,168.69 183.22,167.03 184.97,164.71 186.71,161.75 188.46,158.18 190.20,154.04 191.95,149.34 193.69,144.14 195.44,138.47 197.18,132.40 198.93,125.96 200.67,119.22 202.42,112.22 204.16,105.04 205.91,97.73 207.65,90.35 209.40,82.97 211.14,75.65 212.89,68.45 214.63,61.44 216.38,54.67 218.12,48.20 219.87,42.09 221.61,36.38 223.36,31.13 225.10,26.39 226.85,22.19 228.59,18.56 230.34,15.54 232.08,13.16 233.83,11.44 235.57,10.38 237.32,10.00 239.06,10.30 240.81,11.29 242.55,12.94 244.30,15.25 246.04,18.20 247.79,21.76 249.53,25.90 251.28,30.59 253.02,35.79 254.77,41.45 256.51,47.52 258.26,53.95 260.00,60.69 261.75,67.68 263.49,74.86 265.24,82.17 266.98,89.55 268.73,96.93 270.47,104.25 272.22,111.45 273.96,118.47 275.71,125.24 277.45,131.71 279.20,137.83 280.94,143.54 282.69,148.80 284.43,153.55 286.18,157.76 287.92,161.39 289.67,164.42 291.41,166.81 293.16,168.55 294.90,169.61 296.65,170.00 298.39,169.70 300.14,168.73 301.88,167.08 303.63,164.78 305.37,161.84 307.12,158.29 308.86,154.16 310.61,149.47 312.35,144.29 314.10,138.63 315.84,132.57 317.59,126.14 319.33,119.40 321.08,112.42 322.82,105.24 324.57,97.93 326.31,90.55 328.06,83.17 329.80,75.85 331.55,68.65 333.29,61.63 335.04,54.85 336.78,48.37 338.53,42.25 340.27,36.53 342.02,31.27 343.76,26.51 345.51,22.29 347.25,18.65 349.00,15.62 350.74,13.22 352.49,11.47 354.23,10.40 355.98,10.00 357.72,10.29 359.47,11.25 361.21,12.89 362.96,15.18 364.70,18.11 366.45,21.66 368.19,25.78 369.94,30.46 371.68,35.64 373.43,41.29 375.17,47.35 376.92,53.77 378.66,60.50 380.41,67.49 382.15,74.66 383.90,81.97 385.64,89.35 387.39,96.73 389.13,104.05 390.88,111.26 392.62,118.28 394.37,125.06 396.11,131.54 397.86,137.67 399.60,143.39 401.35,148.66 403.09,153.43 404.84,157.65 406.58,161.30 408.33,164.35 410.07,166.75 411.82,168.51 413.56,169.59 415.31,170.00 417.05,169.72 418.80,168.77 420.54,167.14 422.29,164.85 424.03,161.93 425.78,158.39 427.52,154.28 429.27,149.61 431.01,144.43 432.76,138.79 434.50,132.74 436.25,126.32 437.99,119.59 439.74,112.61 441.48,105.43 443.23,98.13 444.97,90.75 446.72,83.37 448.46,76.05 450.21,68.84 451.95,61.82 453.70,55.03 455.44,48.54 457.19,42.41 458.93,36.68 460.68,31.41 462.42,26.63 464.17,22.40 465.91,18.74 467.66,15.69 469.40,13.28 471.15,11.51 472.89,10.42 474.64,10.00 476.38,10.27" fill="none" stroke={BLUE}></path>
          </g>
        </g>
      </g>
    </svg>
  </div>
</main>

<style>
  #github-container {
    position: relative;
  }
  #github {
    position: absolute;
    top: 0;
    right: 0;
    font-size: 2em;
  }

  svg {
    width: 100%;
  }
  line {
    stroke: gray;
    stroke-width: 2px;
  }
  path {
    stroke-width: 2px;
  }

  .animate {
    animation-duration: 8s;
    animation-iteration-count: infinite;
    animation-timing-function: linear;
  }

  .combined {
    animation-name: leftSlide;
    
  }
  @keyframes leftSlide {
    from {
      transform: translateX(-50%);
    }
    to {
      transform: translateX(0px);
    }
  }

  .scale {
    transform: translate(0, 40%) scale(1,0.5);
  }

  .broken-up {
    animation-name: rightSlide;
  }
  @keyframes rightSlide {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(50%);
    }
  }
</style>